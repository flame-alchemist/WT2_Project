<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Sign Up</title>
        <link rel="stylesheet" href="signup.css">
        <link rel="stylesheet" href="../navbar/nav.css">
        
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

    </head>
    <body>
        <script>
            function requestsend()
            {
                var form = new FormData(document.getElementById('form'));
                var obj = {"name":form.get("name"), "email":form.get("emailID"), "password":form.get("password")};

                var JSONdata = JSON.stringify(obj);
                console.log(JSONdata);
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "http://0.0.0.0:8080/api/v1/add_user", true);
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function(){
                    if (xhr.status === 201)     //&& xhr.readyState === 4)
                        alert("User added");
                    else
                        alert("User exists");
                };
                xhr.send(JSONdata);
                alert("Processing");
            }
        </script>
        
        <!--Navigation bar-->
        <div class="topnav">
                <a href="../home_page/home.html">Home</a>
                <a href="../cart_page/cart.html">Cart</a>
                <a href="../login_signup/signup.html">Signup</a>
                <a href="../login_signup/login.html">Login</a>

        </div>
        <!--end of Navigation bar-->

        <div id = "box">
                <center><h1 class = "header" >Sign Up for Free</h1></center>
                <br>    
                <form id='form'  onsubmit="requestsend()" method="POST" class="form">
                        <b>Username</b><input type="text" name="name" class="tbox">
                        <br>
                        <b>Email</b><input type="email" name="emailID" class="tbox">
                        <br>
                        <b>Password</b><input type="password" name="password" minlength="5" class="tbox">
                        <br>
                        <center><input type="submit" value="Sign-Up" class="sub"></center>
                    </form>
        </div>   
        <center>
                <footer class="foot">
                    <p ><a id = "footref" href = "../info_pages/aboutus.html" class="link">About Us</a>
                    <a id = "footref" href = "../info_pages/FAQ.html" class="link">FAQ</a>
                    <a id = "footref" href="../info_pages/privacy_policy.html" class="link">Privacy Policy</a>
                    <a id = "footref" href="../info_pages/contactus.html" class="link">Contact Us</a>
                </footer>
            </center>             
        
    </body>
</html>
